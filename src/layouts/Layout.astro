---
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config/content";

const {
  title = siteConfig.title,
  description = siteConfig.description,
  container = true, // default: wrap content in max-width container
} = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Inconsolata:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />

    <script is:inline>
      (function () {
        const savedTheme = localStorage.getItem("theme") || "dark";
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const initialTheme =
          savedTheme === "system" ? (prefersDark ? "dark" : "light") : savedTheme;

        if (initialTheme === "dark") document.documentElement.classList.add("dark");
        else document.documentElement.classList.remove("dark");
      })();
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
          if (localStorage.getItem("theme") === "system") {
            if (e.matches) document.documentElement.classList.add("dark");
            else document.documentElement.classList.remove("dark");
          }
        });
      });
    </script>

    <style>
      @keyframes float {
        0% { transform: scale(1.2); }
        50% { transform: scale(1.3); }
        100% { transform: scale(1.2); }
      }
      .dot-hexagon-light {
        background-image:
          radial-gradient(circle, #80808045 1px, transparent 1px),
          radial-gradient(circle, #80808045 1px, transparent 1px);
        background-size: 24px 41.57px;
        background-position: 0 0, 12px 20.78px;
      }
      .dot-hexagon-dark {
        background-image:
          radial-gradient(circle, #ffffff35 1px, transparent 1px),
          radial-gradient(circle, #ffffff35 1px, transparent 1px);
        background-size: 24px 41.57px;
        background-position: 0 0, 12px 20.78px;
      }
    </style>
  </head>

  <body class="min-h-screen flex flex-col bg-white dark:bg-neutral-900 transition-colors duration-300 font-sans antialiased text-[16px] leading-relaxed">
    <div class="relative flex-grow flex flex-col">
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="absolute inset-0 dot-hexagon-light dark:dot-hexagon-dark"></div>

        <div
          class="absolute inset-0
          bg-[radial-gradient(ellipse_80%_80%_at_50%_50%,transparent_0%,rgba(255,255,255,0.5)_60%,rgba(255,255,255,0.9)_85%,white_100%)]
          dark:bg-[radial-gradient(ellipse_80%_80%_at_50%_50%,transparent_0%,rgba(23,23,23,0.5)_60%,rgba(23,23,23,0.9)_85%,rgb(23,23,23)_100%)]"
        ></div>

        <div
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
          h-[1200px] w-[1200px] rounded-full bg-neutral-400 opacity-10 blur-[100px]
          dark:bg-neutral-600 dark:opacity-15"
          style="max-height: 100vh; max-width: 100vw;"
        ></div>
      </div>

      <Navigation />

      <main class="relative flex-1 pt-4 min-h-0 font-mono">
        {container ? (
          <div
            class="mx-auto w-full max-w-5xl px-4 sm:px-6 lg:px-8
                  font-mono
                  [&_h1]:font-sans [&_h2]:font-sans [&_h3]:font-sans
                  [&_h4]:font-sans [&_h5]:font-sans [&_h6]:font-sans"
          >
            <slot />
          </div>
        ) : (
          <slot />
        )}
      </main>

      <Footer />
    </div>
  </body>
</html>
