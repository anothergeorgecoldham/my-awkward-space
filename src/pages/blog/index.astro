---
import Layout from "../../layouts/Layout.astro";
import { siteConfig } from "../../config/content";
import { getAllPosts } from "../../utils/getPosts";

const posts = getAllPosts();
---

<Layout title={`Blog - ${siteConfig.name}`} description="Writing on security, AI, and the browser edge.">
  <section class="py-10">
    <header class="mb-10">
      <h1 class="text-3xl sm:text-4xl font-bold tracking-tight text-neutral-900 dark:text-neutral-100">
        Blog
      </h1>
      <p class="mt-3 text-lg leading-7 text-neutral-600 dark:text-neutral-400 max-w-3xl">
        Notes on security, AI, and whatever I'm currently overthinking.
      </p>
    </header>

    {posts.length === 0 ? (
      <div class="rounded-2xl border border-neutral-300 dark:border-neutral-800/70 bg-neutral-100 dark:bg-white/5 p-6">
        <p class="text-neutral-700 dark:text-neutral-300">
          No posts yet. This is the calm before the storm.
        </p>
      </div>
    ) : (
      <div class="grid grid-cols-1 gap-4">
        {posts.map((post) => (
          <a href={post.href} class="group block">
            <article
              class="rounded-2xl border border-neutral-300 dark:border-neutral-800/70 bg-neutral-100 dark:bg-white/5 p-6
                     transition-all duration-300
                     hover:border-accent-primary/40 hover:bg-accent-primary/5 hover:shadow-accentGlow"
            >
              <div class="flex items-start justify-between gap-4">
                <div class="min-w-0">
                  <h2 class="text-lg sm:text-xl font-bold text-neutral-900 dark:text-neutral-100 transition-colors group-hover:text-accent-secondary">
                    {post.title}
                  </h2>

                  {post.description ? (
                    <p class="mt-2 text-sm text-neutral-600 dark:text-neutral-400">
                      {post.description}
                    </p>
                  ) : null}

                  <div class="mt-3 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-neutral-500 dark:text-neutral-500">
                    {post.date ? <span>{post.date}</span> : null}
                    {post.readTime ? <span>â€¢ {post.readTime}</span> : null}
                  </div>
                </div>

                <span class="mt-1 text-neutral-500 transition-colors group-hover:text-accent-secondary">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                  </svg>
                </span>
              </div>
            </article>
          </a>
        ))}
      </div>
    )}
  </section>
</Layout>
